{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///external \"preact\"","webpack:///../src/util.js","webpack:///../src/index.js","webpack:///../node_modules/preact-router/match.js","webpack:///./pe/model.ts","webpack:///./pe/views/game2.tsx","webpack:///./web/components/home.tsx","webpack:///./web/components/notfound/index.tsx","webpack:///./web/assets/bulma-logo.png","webpack:///./web/components/header/index.tsx","webpack:///./web/components/app.tsx","webpack:///./index.ts"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","require","EMPTY","assign","obj","props","let","exec","url","route","opts","ret","reg","match","matches","split","length","decodeURIComponent","slice","join","segmentize","replace","max","Math","charAt","param","flags","plus","indexOf","star","val","map","default","pathRankSort","a","b","rank","index","prepareVNodeForRanking","vnode","path","rankSegment","rankChild","segment","customHistory","ROUTERS","subscribers","getCurrentUrl","location","getCurrentLocation","pathname","search","canRoute","type","history","setUrl","routeTo","didRoute","routeFromLink","node","getAttribute","href","target","handleLinkClick","e","ctrlKey","metaKey","altKey","shiftKey","button","currentTarget","this","prevent","stopImmediatePropagation","stopPropagation","preventDefault","delegateLinkHandler","String","nodeName","toUpperCase","hasAttribute","parentNode","eventListenersInitialized","Router","super","state","addEventListener","shouldComponentUpdate","static","onChange","const","children","getMatchingChildren","setState","updating","forceUpdate","componentWillMount","push","componentDidMount","unlisten","listen","componentWillUnmount","splice","componentWillUpdate","componentDidUpdate","invoke","filter","sort","newProps","ref","Boolean","render","active","current","previous","previousUrl","router","Link","onClick","Route","component","Match","undefined","_extends","arguments","source","_preact","_preactRouter","_classCallCheck","instance","Constructor","TypeError","_possibleConstructorReturn","self","ReferenceError","_Component","_temp","_this","_len","args","Array","_key","apply","concat","update","nextUrl","subClass","superClass","constructor","writable","configurable","setPrototypeOf","__proto__","_inherits","Component","_ref","activeClassName","keys","_objectWithoutProperties","h","_ref2","class","className","acos","atan2","cos","PI","random","sin","sqrt","Vec2","x","y","_x","_y","add","vecs","sub","dot","cross","vec","rotate","angle","pol","rads","reduce","addRadians","rotateTo","scale","car","scaleTo","lookAt","pos","dist","acc","cur","head","tail","between","other","circle","radius","Path2D","ellipse","draw","ctx","fill","stroke","beginPath","fillStyle","strokeStyle","lineWidth","Persuit","getDesiredDirection","me","vel","Line","origin","offset","rayLength","rxs","avoid","theta1","theta2","Agent","getDirection","CAgent","getStyle","LAgent","PAgent","setTarget","RAgent","Grid","size","width","height","cellW","cellH","cells","setTerrian","j","terrian","root","rect","addPath","lines","line","moveTo","lineTo","Board","agents","grid","eva","per","per2","per3","dummy","forEach","clearRect","style","dir","sideLength","save","lineCap","lineJoin","translate","restore","drawArrow","intersection","min","getWallIntersection","drawLine","Game2","board","lastUpdate","context","createRef","mainLoop","getContext","performance","now","window","requestAnimationFrame","Home","placeholder","aria-hidden","NotFound","Header","role","aria-label","src","logo","App","id"],"mappings":"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","file":"ssr-bundle.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"qVkA\");\n","module.exports = require(\"preact\");","\nconst EMPTY = {};\n\nexport function assign(obj, props) {\n\t// eslint-disable-next-line guard-for-in\n\tfor (let i in props) {\n\t\tobj[i] = props[i];\n\t}\n\treturn obj;\n}\n\nexport function exec(url, route, opts) {\n\tlet reg = /(?:\\?([^#]*))?(#.*)?$/,\n\t\tc = url.match(reg),\n\t\tmatches = {},\n\t\tret;\n\tif (c && c[1]) {\n\t\tlet p = c[1].split('&');\n\t\tfor (let i=0; i<p.length; i++) {\n\t\t\tlet r = p[i].split('=');\n\t\t\tmatches[decodeURIComponent(r[0])] = decodeURIComponent(r.slice(1).join('='));\n\t\t}\n\t}\n\turl = segmentize(url.replace(reg, ''));\n\troute = segmentize(route || '');\n\tlet max = Math.max(url.length, route.length);\n\tfor (let i=0; i<max; i++) {\n\t\tif (route[i] && route[i].charAt(0)===':') {\n\t\t\tlet param = route[i].replace(/(^:|[+*?]+$)/g, ''),\n\t\t\t\tflags = (route[i].match(/[+*?]+$/) || EMPTY)[0] || '',\n\t\t\t\tplus = ~flags.indexOf('+'),\n\t\t\t\tstar = ~flags.indexOf('*'),\n\t\t\t\tval = url[i] || '';\n\t\t\tif (!val && !star && (flags.indexOf('?')<0 || plus)) {\n\t\t\t\tret = false;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tmatches[param] = decodeURIComponent(val);\n\t\t\tif (plus || star) {\n\t\t\t\tmatches[param] = url.slice(i).map(decodeURIComponent).join('/');\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t\telse if (route[i]!==url[i]) {\n\t\t\tret = false;\n\t\t\tbreak;\n\t\t}\n\t}\n\tif (opts.default!==true && ret===false) return false;\n\treturn matches;\n}\n\nexport function pathRankSort(a, b) {\n\treturn (\n\t\t(a.rank < b.rank) ? 1 :\n\t\t\t(a.rank > b.rank) ? -1 :\n\t\t\t\t(a.index - b.index)\n\t);\n}\n\n// filter out VNodes without attributes (which are unrankeable), and add `index`/`rank` properties to be used in sorting.\nexport function prepareVNodeForRanking(vnode, index) {\n\tvnode.index = index;\n\tvnode.rank = rankChild(vnode);\n\treturn vnode.props;\n}\n\nexport function segmentize(url) {\n\treturn url.replace(/(^\\/+|\\/+$)/g, '').split('/');\n}\n\nexport function rankSegment(segment) {\n\treturn segment.charAt(0)==':' ? (1 + '*+?'.indexOf(segment.charAt(segment.length-1))) || 4 : 5;\n}\n\nexport function rank(path) {\n\treturn segmentize(path).map(rankSegment).join('');\n}\n\nfunction rankChild(vnode) {\n\treturn vnode.props.default ? 0 : rank(vnode.props.path);\n}\n","import { cloneElement, createElement, Component, toChildArray } from 'preact';\nimport { exec, prepareVNodeForRanking, assign, pathRankSort } from './util';\n\nlet customHistory = null;\n\nconst ROUTERS = [];\n\nconst subscribers = [];\n\nconst EMPTY = {};\n\nfunction setUrl(url, type='push') {\n\tif (customHistory && customHistory[type]) {\n\t\tcustomHistory[type](url);\n\t}\n\telse if (typeof history!=='undefined' && history[type+'State']) {\n\t\thistory[type+'State'](null, null, url);\n\t}\n}\n\n\nfunction getCurrentUrl() {\n\tlet url;\n\tif (customHistory && customHistory.location) {\n\t\turl = customHistory.location;\n\t}\n\telse if (customHistory && customHistory.getCurrentLocation) {\n\t\turl = customHistory.getCurrentLocation();\n\t}\n\telse {\n\t\turl = typeof location!=='undefined' ? location : EMPTY;\n\t}\n\treturn `${url.pathname || ''}${url.search || ''}`;\n}\n\n\n\nfunction route(url, replace=false) {\n\tif (typeof url!=='string' && url.url) {\n\t\treplace = url.replace;\n\t\turl = url.url;\n\t}\n\n\t// only push URL into history if we can handle it\n\tif (canRoute(url)) {\n\t\tsetUrl(url, replace ? 'replace' : 'push');\n\t}\n\n\treturn routeTo(url);\n}\n\n\n/** Check if the given URL can be handled by any router instances. */\nfunction canRoute(url) {\n\tfor (let i=ROUTERS.length; i--; ) {\n\t\tif (ROUTERS[i].canRoute(url)) return true;\n\t}\n\treturn false;\n}\n\n\n/** Tell all router instances to handle the given URL.  */\nfunction routeTo(url) {\n\tlet didRoute = false;\n\tfor (let i=0; i<ROUTERS.length; i++) {\n\t\tif (ROUTERS[i].routeTo(url)===true) {\n\t\t\tdidRoute = true;\n\t\t}\n\t}\n\tfor (let i=subscribers.length; i--; ) {\n\t\tsubscribers[i](url);\n\t}\n\treturn didRoute;\n}\n\n\nfunction routeFromLink(node) {\n\t// only valid elements\n\tif (!node || !node.getAttribute) return;\n\n\tlet href = node.getAttribute('href'),\n\t\ttarget = node.getAttribute('target');\n\n\t// ignore links with targets and non-path URLs\n\tif (!href || !href.match(/^\\//g) || (target && !target.match(/^_?self$/i))) return;\n\n\t// attempt to route, if no match simply cede control to browser\n\treturn route(href);\n}\n\n\nfunction handleLinkClick(e) {\n\tif (e.ctrlKey || e.metaKey || e.altKey || e.shiftKey || e.button!==0) return;\n\trouteFromLink(e.currentTarget || e.target || this);\n\treturn prevent(e);\n}\n\n\nfunction prevent(e) {\n\tif (e) {\n\t\tif (e.stopImmediatePropagation) e.stopImmediatePropagation();\n\t\tif (e.stopPropagation) e.stopPropagation();\n\t\te.preventDefault();\n\t}\n\treturn false;\n}\n\n\nfunction delegateLinkHandler(e) {\n\t// ignore events the browser takes care of already:\n\tif (e.ctrlKey || e.metaKey || e.altKey || e.shiftKey || e.button!==0) return;\n\n\tlet t = e.target;\n\tdo {\n\t\tif (String(t.nodeName).toUpperCase()==='A' && t.getAttribute('href')) {\n\t\t\tif (t.hasAttribute('native')) return;\n\t\t\t// if link is handled by the router, prevent browser defaults\n\t\t\tif (routeFromLink(t)) {\n\t\t\t\treturn prevent(e);\n\t\t\t}\n\t\t}\n\t} while ((t=t.parentNode));\n}\n\n\nlet eventListenersInitialized = false;\n\nfunction initEventListeners() {\n\tif (eventListenersInitialized) return;\n\n\tif (typeof addEventListener==='function') {\n\t\tif (!customHistory) {\n\t\t\taddEventListener('popstate', () => {\n\t\t\t\trouteTo(getCurrentUrl());\n\t\t\t});\n\t\t}\n\t\taddEventListener('click', delegateLinkHandler);\n\t}\n\teventListenersInitialized = true;\n}\n\n\nclass Router extends Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\t\tif (props.history) {\n\t\t\tcustomHistory = props.history;\n\t\t}\n\n\t\tthis.state = {\n\t\t\turl: props.url || getCurrentUrl()\n\t\t};\n\n\t\tinitEventListeners();\n\t}\n\n\tshouldComponentUpdate(props) {\n\t\tif (props.static!==true) return true;\n\t\treturn props.url!==this.props.url || props.onChange!==this.props.onChange;\n\t}\n\n\t/** Check if the given URL can be matched against any children */\n\tcanRoute(url) {\n\t\tconst children = toChildArray(this.props.children);\n\t\treturn this.getMatchingChildren(children, url, false).length > 0;\n\t}\n\n\t/** Re-render children with a new URL to match against. */\n\trouteTo(url) {\n\t\tthis.setState({ url });\n\n\t\tconst didRoute = this.canRoute(url);\n\n\t\t// trigger a manual re-route if we're not in the middle of an update:\n\t\tif (!this.updating) this.forceUpdate();\n\n\t\treturn didRoute;\n\t}\n\n\tcomponentWillMount() {\n\t\tROUTERS.push(this);\n\t\tthis.updating = true;\n\t}\n\n\tcomponentDidMount() {\n\t\tif (customHistory) {\n\t\t\tthis.unlisten = customHistory.listen((location) => {\n\t\t\t\tthis.routeTo(`${location.pathname || ''}${location.search || ''}`);\n\t\t\t});\n\t\t}\n\t\tthis.updating = false;\n\t}\n\n\tcomponentWillUnmount() {\n\t\tif (typeof this.unlisten==='function') this.unlisten();\n\t\tROUTERS.splice(ROUTERS.indexOf(this), 1);\n\t}\n\n\tcomponentWillUpdate() {\n\t\tthis.updating = true;\n\t}\n\n\tcomponentDidUpdate() {\n\t\tthis.updating = false;\n\t}\n\n\tgetMatchingChildren(children, url, invoke) {\n\t\treturn children\n\t\t\t.filter(prepareVNodeForRanking)\n\t\t\t.sort(pathRankSort)\n\t\t\t.map( vnode => {\n\t\t\t\tlet matches = exec(url, vnode.props.path, vnode.props);\n\t\t\t\tif (matches) {\n\t\t\t\t\tif (invoke !== false) {\n\t\t\t\t\t\tlet newProps = { url, matches };\n\t\t\t\t\t\tassign(newProps, matches);\n\t\t\t\t\t\tdelete newProps.ref;\n\t\t\t\t\t\tdelete newProps.key;\n\t\t\t\t\t\treturn cloneElement(vnode, newProps);\n\t\t\t\t\t}\n\t\t\t\t\treturn vnode;\n\t\t\t\t}\n\t\t\t}).filter(Boolean);\n\t}\n\n\trender({ children, onChange }, { url }) {\n\t\tlet active = this.getMatchingChildren(toChildArray(children), url, true);\n\n\t\tlet current = active[0] || null;\n\n\t\tlet previous = this.previousUrl;\n\t\tif (url!==previous) {\n\t\t\tthis.previousUrl = url;\n\t\t\tif (typeof onChange==='function') {\n\t\t\t\tonChange({\n\t\t\t\t\trouter: this,\n\t\t\t\t\turl,\n\t\t\t\t\tprevious,\n\t\t\t\t\tactive,\n\t\t\t\t\tcurrent\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\n\t\treturn current;\n\t}\n}\n\nconst Link = (props) => (\n\tcreateElement('a', assign({ onClick: handleLinkClick }, props))\n);\n\nconst Route = props => createElement(props.component, props);\n\nRouter.subscribers = subscribers;\nRouter.getCurrentUrl = getCurrentUrl;\nRouter.route = route;\nRouter.Router = Router;\nRouter.Route = Route;\nRouter.Link = Link;\nRouter.exec = exec;\n\nexport { subscribers, getCurrentUrl, route, Router, Route, Link, exec };\nexport default Router;\n","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n\tvalue: true\n});\nexports.Link = exports.Match = undefined;\n\nvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\nvar _preact = require('preact');\n\nvar _preactRouter = require('preact-router');\n\nfunction _objectWithoutProperties(obj, keys) { var target = {}; for (var i in obj) { if (keys.indexOf(i) >= 0) continue; if (!Object.prototype.hasOwnProperty.call(obj, i)) continue; target[i] = obj[i]; } return target; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar Match = exports.Match = function (_Component) {\n\t_inherits(Match, _Component);\n\n\tfunction Match() {\n\t\tvar _temp, _this, _ret;\n\n\t\t_classCallCheck(this, Match);\n\n\t\tfor (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {\n\t\t\targs[_key] = arguments[_key];\n\t\t}\n\n\t\treturn _ret = (_temp = (_this = _possibleConstructorReturn(this, _Component.call.apply(_Component, [this].concat(args))), _this), _this.update = function (url) {\n\t\t\t_this.nextUrl = url;\n\t\t\t_this.setState({});\n\t\t}, _temp), _possibleConstructorReturn(_this, _ret);\n\t}\n\n\tMatch.prototype.componentDidMount = function componentDidMount() {\n\t\t_preactRouter.subscribers.push(this.update);\n\t};\n\n\tMatch.prototype.componentWillUnmount = function componentWillUnmount() {\n\t\t_preactRouter.subscribers.splice(_preactRouter.subscribers.indexOf(this.update) >>> 0, 1);\n\t};\n\n\tMatch.prototype.render = function render(props) {\n\t\tvar url = this.nextUrl || (0, _preactRouter.getCurrentUrl)(),\n\t\t    path = url.replace(/\\?.+$/, '');\n\t\tthis.nextUrl = null;\n\t\treturn props.children({\n\t\t\turl: url,\n\t\t\tpath: path,\n\t\t\tmatches: (0, _preactRouter.exec)(path, props.path, {}) !== false\n\t\t});\n\t};\n\n\treturn Match;\n}(_preact.Component);\n\nvar Link = function Link(_ref) {\n\tvar activeClassName = _ref.activeClassName,\n\t    path = _ref.path,\n\t    props = _objectWithoutProperties(_ref, ['activeClassName', 'path']);\n\n\treturn (0, _preact.h)(\n\t\tMatch,\n\t\t{ path: path || props.href },\n\t\tfunction (_ref2) {\n\t\t\tvar matches = _ref2.matches;\n\t\t\treturn (0, _preact.h)(_preactRouter.Link, _extends({}, props, { 'class': [props.class || props.className, matches && activeClassName].filter(Boolean).join(' ') }));\n\t\t}\n\t);\n};\n\nexports.Link = Link;\nexports.default = Match;\n\nMatch.Link = Link;\n","const { acos, atan2, cos, PI, random, sin, sqrt } = Math;\n\nclass Vec2 {\n    private readonly _x: number;\n    private readonly _y: number;\n\n    private constructor(x: number, y: number) {\n        this._x = x;\n        this._y = y;\n    }\n\n    get x() {\n        return this._x;\n    }\n\n    get y() {\n        return this._y;\n    }\n\n    get angle() {\n        return atan2(this.y, this.x);\n    }\n\n    get length() {\n        return sqrt(this.dot(this));\n    }\n\n    static car(x: number, y: number) {\n        return new Vec2(x, y);\n    }\n\n    static pol(angle: number, length: number) {\n        return Vec2.car(cos(angle), sin(angle)).scale(length);\n    }\n\n    static add(...vecs: Vec2[]) {\n        const x = vecs.reduce((acc, cur) => acc + cur.x, 0);\n        const y = vecs.reduce((acc, cur) => acc + cur.y, 0);\n        return Vec2.car(x, y);\n    }\n\n    static sub(head: Vec2, ...tail: Vec2[]) {\n        const x = tail.reduce((acc, cur) => acc - cur.x, head.x);\n        const y = tail.reduce((acc, cur) => acc - cur.y, head.y);\n        return Vec2.car(x, y);\n    }\n\n    static dot(...vecs: Vec2[]) {\n        const x = vecs.reduce((acc, cur) => acc * cur.x, 1);\n        const y = vecs.reduce((acc, cur) => acc * cur.y, 1);\n        return x + y;\n    }\n\n    between(other: Vec2) {\n        return acos(Vec2.dot(this, other) / this.length * other.length);\n    }\n\n    add = (...vecs: Vec2[]) => Vec2.add(this, ...vecs);\n\n    sub = (...vecs: Vec2[]) => Vec2.sub(this, ...vecs);\n\n    dot = (...vecs: Vec2[]) => Vec2.dot(this, ...vecs);\n\n    cross = (vec: Vec2) => this.x * vec.y - (this.y * vec.x);\n\n    rotate = (angle: number) => Vec2.pol(addRadians(this.angle, angle), this.length);\n\n    rotateTo = (angle: number) => Vec2.pol(angle, this.length);\n\n    scale = (c: number) => Vec2.car(c * this.x, c * this.y);\n\n    scaleTo = (length: number) => Vec2.pol(this.angle, length);\n\n    lookAt = (pos: Vec2) => Vec2.pol(pos.sub(this).angle, this.length);\n\n    dist = (pos: Vec2) => this.sub(pos).length;\n}\n\ntype Context = CanvasRenderingContext2D;\n\ninterface Updatable {\n    update(): void;\n}\n\ninterface Drawable {\n    draw(ctx: Context): void;\n}\n\ninterface Fill {\n    readonly fillStyle: string;\n}\n\ninterface Stroke {\n    readonly strokeStyle: string;\n    readonly lineWidth: number;\n}\n\nfunction addRadians(...rads: number[]) {\n    return rads.reduce((a, b) => a + b, 0) % (2 * PI);\n}\n\nfunction circle(pos: Vec2, radius: number): Path2D {\n    const path = new Path2D();\n    path.ellipse(pos.x, pos.y, radius, radius, 0, 0, 2 * PI);\n    return path;\n}\n\nfunction arrow(pos: Vec2, sideLength: number): Path2D {\n    const path = new Path2D();\n    path.moveTo(pos.x, pos.y);\n    path.lineTo(sideLength, 0);\n    path.lineTo(sideLength, sideLength);\n    return path;\n}\n\n// function grid(size: Vec2, width: number, height: number): Path2D {\n//     const cellW = width / size.x;\n//     const cellH = height / size.y;\n\n//     const root = new Path2D();\n\n//     for (let i = 0; i <= size.x; i++) {\n//         const x = i * cellW;\n//         const line = new Path2D();\n//         line.moveTo(x, 0);\n//         line.lineTo(x, height);\n//         root.addPath(line);\n//     }\n\n//     for (let i = 0; i <= size.y; i++) {\n//         const y = i * cellH;\n//         const line = new Path2D();\n//         line.moveTo(0, y);\n//         line.lineTo(width, y);\n//         root.addPath(line);\n//     }\n\n//     return root;\n// }\n\nfunction draw(ctx: Context, path: Path2D, fill?: Fill, stroke?: Stroke) {\n    if (fill || stroke) {\n        ctx.beginPath();\n    }\n\n    if (fill) {\n        ctx.fillStyle = fill.fillStyle;\n        ctx.fill(path);\n    }\n\n    if (stroke) {\n        ctx.strokeStyle = stroke.strokeStyle;\n        ctx.lineWidth = stroke.lineWidth;\n        ctx.stroke(path);\n    }\n}\n\nfunction drawArrow(ctx: Context, pos: Vec2, dir: number, radius: number, sideLength: number) {\n    ctx.save();\n    ctx.lineCap = \"round\";\n    ctx.lineJoin = \"round\";\n    ctx.translate(pos.x, pos.y);\n    ctx.rotate(dir);\n    ctx.translate(radius, 0);\n    ctx.rotate(PI / 4);\n    ctx.moveTo(-sideLength, 0);\n    ctx.lineTo(0, 0);\n    ctx.lineTo(0, sideLength);\n    ctx.stroke();\n    ctx.restore();\n}\n\nfunction drawLine(ctx: Context, a: Vec2, b: Vec2) {\n    ctx.moveTo(a.x, a.y);\n    ctx.lineTo(b.x, b.y);\n    ctx.stroke();\n}\n\ninterface Vehicle {\n    pos: Vec2;\n    vel: Vec2;\n}\n\ninterface Steerer {\n    getDesiredDirection(me: Vehicle, target: Vehicle): number;\n}\n\nclass Seek implements Steerer {\n    getDesiredDirection(me: Vehicle, target: Vehicle): number {\n        return me.pos.lookAt(target.pos).angle;\n    }\n}\n\nclass Persuit implements Steerer {\n    getDesiredDirection(me: Vehicle, target: Vehicle): number {\n        const c = 0.1;\n        const t = me.pos.dist(target.pos) * c;\n        return me.pos.lookAt(target.pos.add(target.vel.scale(t))).angle;\n    }\n}\n\nclass Flee implements Steerer {\n    getDesiredDirection(me: Vehicle, target: Vehicle): number {\n        return target.vel.angle;\n    }\n}\n\nclass Evasion implements Steerer {\n    getDesiredDirection(me: Vehicle, target: Vehicle): number {\n        const c = 0.1;\n        const t = me.pos.dist(target.pos) * c;\n        return me.pos.lookAt(target.pos.add(target.vel.scale(t))).rotate(PI).angle;\n    }\n}\n\nclass Line {\n    origin: Vec2; // q\n    offset: Vec2; // s\n\n    constructor(origin: Vec2, offset: Vec2) {\n        this.origin = origin;\n        this.offset = offset;\n    }\n\n    rayLength(pos: Vec2, angle: number): number | null {\n        // https://stackoverflow.com/a/565282\n        const r = Vec2.pol(angle, 1);\n        const rxs = r.cross(this.offset);\n        if (rxs == 0) return null;\n        return this.origin.sub(pos).cross(this.offset.scale(1 / rxs));\n    }\n\n    avoid(pos: Vec2, angle: number): number {\n        const theta1 = pos.lookAt(this.origin).angle;\n        const theta2 = pos.lookAt(this.origin.add(this.offset)).angle;\n        const dist1 = Vec2.pol(theta1, 1).dist(Vec2.pol(angle, 1));\n        const dist2 = Vec2.pol(theta2, 1).dist(Vec2.pol(angle, 1));\n        if (dist1 < dist2) return theta1;\n        return theta2;\n    }\n}\n\nfunction getWallIntersection(pos: Vec2, angle: number) {\n    const width = 962;\n    const height = 595;\n    const l = new Line(Vec2.car(0, 0), Vec2.car(0, height));\n    const t = new Line(Vec2.car(0, 0), Vec2.car(width, 0));\n    const r = new Line(Vec2.car(width, 0), Vec2.car(0, height));\n    const b = new Line(Vec2.car(0, height), Vec2.car(width, 0));\n\n    const arr = [l, t, r, b];\n    const lengths = arr.map(x => x.rayLength(pos, angle));\n    const a = lengths.filter(x => x != null && x >= 0);\n    return pos.add(Vec2.pol(angle, Math.min(...(a as number[]))));\n}\n\n// function getWallIntersection(pos: Vec2, angle: number): Vec2 {\n//     const width = 962;\n//     const height = 595;\n\n//     const d = Vec2.pol(angle, 1);\n\n//     let tL, tR, tT, tB = 0;\n\n//     if (d.x == 0) {\n//         tL = -1;\n//         tR = -1;\n//     }\n//     else {\n//         tL = (0 - pos.x) / d.x;\n//         tR = (width - pos.x) / d.x;\n//     }\n\n//     if (d.y == 0) {\n//         tT = -1;\n//         tB = -1;\n//     }\n//     else {\n//         tT = (0 - pos.y) / d.y;\n//         tB = (height - pos.y) / d.y;\n//     }\n\n//     const t = Math.min(...[tL, tR, tT, tB].filter(x => x >= 0));\n\n//     return pos.add(Vec2.pol(angle, t));\n// }\n\ninterface AgentStyle {\n    fill: Fill;\n    stroke: Stroke;\n}\n\n// abstract class Agent implements Updatable {\n//     vehicle: Vehicle;\n//     steerer: Steerer;\n\n//     constructor(vehicle: Vehicle, steerer: Steerer) {\n//         this.vehicle = vehicle;\n//         this.steerer = steerer;\n//     }\n// }\n\nabstract class Agent implements Updatable {\n    pos: Vec2;\n    vel: Vec2;\n\n    constructor(pos: Vec2, vel: Vec2) {\n        this.pos = pos;\n        this.vel = vel;\n    }\n\n    update() {\n        this.vel = this.vel.rotateTo(this.getDirection());\n\n        // const intersection = getWallIntersection(this.pos, this.vel.angle);\n        // const weight = 1 / this.pos.dist(intersection);\n        // const angle = this.vel.add(Vec2.pol(PI, weight)).angle;\n        // this.vel = this.vel.rotate(angle);\n\n        this.pos = this.pos.add(this.vel);\n    }\n\n    abstract getDirection(): number;\n    abstract getStyle(): AgentStyle;\n}\n\nclass CAgent extends Agent {\n    getDirection() {\n        return this.vel.rotate(0.01 * PI).angle;\n    }\n\n    getStyle() {\n        return {\n            fill: { fillStyle: \"#7EE0B1\" },\n            stroke: { strokeStyle: \"#68BA93\", lineWidth: 3 }\n        };\n    }\n}\n\nclass LAgent extends Agent {\n    getDirection() {\n        return this.vel.angle;\n    }\n\n    getStyle() {\n        return {\n            fill: { fillStyle: \"#7EE0B1\" },\n            stroke: { strokeStyle: \"#68BA93\", lineWidth: 3 }\n        };\n    }\n}\n\nclass PAgent extends Agent {\n    target: Agent | undefined;\n\n    setTarget(target: Agent) {\n        this.target = target;\n    }\n\n    getDirection() {\n        return new Persuit().getDesiredDirection(this, this.target!);\n    }\n\n    getStyle() {\n        return {\n            fill: { fillStyle: \"#79BEE0\" },\n            stroke: { strokeStyle: \"#67A1BD\", lineWidth: 3 }\n        };\n    }\n}\n\nclass RAgent extends Agent {\n    target?: Vec2;\n\n    getDirection() {\n        if (!this.target || this.pos.dist(this.target) < 10) {\n            this.target = Vec2.car(random() * 962, random() * 595);\n        }\n\n        return this.pos.lookAt(this.target).angle;\n    }\n\n    getStyle() {\n        return {\n            fill: { fillStyle: \"#E0A06E\" },\n            stroke: { strokeStyle: \"#BD875D\", lineWidth: 3 }\n        };\n    }\n}\n\nclass EAgent extends Agent {\n    target?: Agent;\n\n    setTarget(target: Agent) {\n        this.target = target;\n    }\n\n    getDirection() {\n        return new Evasion().getDesiredDirection(this, this.target!);\n    }\n\n    getStyle() {\n        return {\n            fill: { fillStyle: \"#E0A06E\" },\n            stroke: { strokeStyle: \"#BD875D\", lineWidth: 3 }\n        };\n    }\n}\n\nclass Grid {\n    size: Vec2;\n    width: number;\n    height: number;\n    cellW: number;\n    cellH: number;\n    cells: boolean[][];\n\n    constructor(size: Vec2, width: number, height: number) {\n      this.size = size;\n      this.width = width;\n      this.height = height;\n      this.cellW = width / size.x\n      this.cellH = height / size.y\n      this.cells = new Array(size.x).fill(0).map(() => new Array(size.y).fill(0));\n    }\n\n    setTerrian(i: number, j: number) {\n        this.cells[i][j] = true;\n    }\n\n    terrian(): Path2D {\n        const root = new Path2D();\n        for (let i = 0; i < this.size.x; i++) {\n            for (let j = 0; j < this.size.y; j++) {\n                if (!this.cells[i][j]) continue;\n                const path = new Path2D();\n                path.rect(i * this.cellW, j * this.cellH, this.cellW, this.cellH);\n                root.addPath(path);\n            }\n        }\n        return root;\n    }\n\n    lines(): Path2D {\n        const root = new Path2D();\n    \n        for (let i = 0; i <= this.size.x; i++) {\n            const x = i * this.cellW;\n            const line = new Path2D();\n            line.moveTo(x, 0);\n            line.lineTo(x, this.height);\n            root.addPath(line);\n        }\n    \n        for (let i = 0; i <= this.size.y; i++) {\n            const y = i * this.cellH;\n            const line = new Path2D();\n            line.moveTo(0, y);\n            line.lineTo(this.width, y);\n            root.addPath(line);\n        }\n    \n        return root;\n    }\n}\n\nclass Board implements Drawable, Updatable {\n    public readonly agents: Agent[];\n    public readonly width: number;\n    public readonly height: number;\n    public readonly grid: Grid;\n\n    constructor(width: number, height: number) {\n        this.width = width;\n        this.height = height;\n        this.grid = new Grid(Vec2.car(26, 16), width, height);\n        this.grid.setTerrian(6, 6);\n        this.grid.setTerrian(6, 7);\n\n        this.agents = [];\n\n        const eva = new CAgent(Vec2.car(250, 250), Vec2.pol(0, 2));\n        const per = new PAgent(Vec2.car(700, 400), Vec2.pol(0, 1.4));\n        const per2 = new PAgent(Vec2.car(500, 400), Vec2.pol(0, 1.4));\n        const per3 = new PAgent(Vec2.car(200, 400), Vec2.pol(0, 1.4));\n        const dummy = new RAgent(Vec2.car(140, 140), Vec2.pol(0, 2));\n        const dummy2 = new LAgent(Vec2.car(140, 140), Vec2.pol(0.5 * PI, 1));\n\n        per.setTarget(dummy);\n        per2.setTarget(dummy);\n        per3.setTarget(dummy);\n        // eva.setTarget(per);\n\n        this.agents.push(eva);\n        this.agents.push(per);\n        this.agents.push(per2);\n        this.agents.push(per3);\n        this.agents.push(dummy);\n    }\n\n    update() {\n        this.agents.forEach(a => a.update());\n    }\n\n    draw(ctx: Context) {\n        // ctx.save();\n        // ctx.setTransform(1, 0, 0, 1, 0, 0);\n        ctx.clearRect(0, 0, this.width, this.height);\n        // ctx.restore();\n\n        // draw grid\n        draw(ctx, this.grid.lines(), undefined, { strokeStyle: \"#BDBDBD\", lineWidth: 0.75 })\n        draw(ctx, this.grid.terrian(), { fillStyle: \"#808080\" }, undefined);\n\n        // draw agents\n        this.agents.forEach(a => {\n            const style = a.getStyle();\n            draw(ctx, circle(a.pos, 15), style.fill, style.stroke);\n            drawArrow(ctx, a.pos, a.vel.angle, 28, 8);\n\n            const intersection = getWallIntersection(a.pos, a.vel.angle);\n            ctx.save();\n            ctx.lineWidth = 1;\n            ctx.strokeStyle = \"black\";\n            drawLine(ctx, a.pos, intersection);\n            ctx.fillStyle = \"red\";\n            ctx.fill(circle(intersection, 3));\n            ctx.restore();\n        });\n    }\n}\n\nexport { Agent, Board };\n","import { h, Component, createRef, RefObject } from \"preact\";\nimport { Board } from \"../model\"\n\ninterface Game2Props {\n    width: number;\n    height: number;\n}\n\ninterface Game2State {\n    value: string;\n}\n\nconst UPDATES_PER_SECOND = 1000 / 60;\n\nclass Game2 extends Component<Game2Props, Game2State> {\n    ref: RefObject<HTMLCanvasElement>;\n    board: Board;\n    lastUpdate: number;\n    context: CanvasRenderingContext2D | null;\n\n    constructor(props: Game2Props) {\n        super(props);\n        this.ref = createRef();\n        this.board = new Board(this.props.width, this.props.height);\n        this.lastUpdate = 0;\n        this.context = null;\n        this.mainLoop = this.mainLoop.bind(this);\n        this.state = { value: \"\" };\n    }\n\n    componentDidMount() {\n        this.context = this.ref.current!.getContext(\"2d\");\n        this.lastUpdate = performance.now();\n        this.mainLoop();\n    }\n\n    mainLoop() {\n        window.requestAnimationFrame(this.mainLoop);\n        this.board.draw(this.context!);\n        this.board.update();\n\n        // this.setState({ value: JSON.stringify(this.board.agents, null, 2) });\n\n        // this.setState({ value: JSON.stringify(this.board.agents[0].getDirection(), null, 2) });\n\n        // const elapsed = performance.now() - this.lastUpdate;\n\n        // if (elapsed > UPDATES_PER_SECOND) {\n        //     this.setState({ value: JSON.stringify(this.board.agents[0], null, 2) });\n        //     this.board.update();\n        //     this.lastUpdate = performance.now() - (elapsed % UPDATES_PER_SECOND);\n        // }\n    }\n\n    render() {\n        const { width, height } = this.props;\n        return <div>\n            <canvas ref={this.ref} width={width} height={height}></canvas>\n            <pre>{this.state.value}</pre>\n        </div>\n    }\n}\n\nexport default Game2;","import { h, Fragment } from \"preact\";\nimport Game from \"../../pe/views/game\";\nimport Game2 from \"../../pe/views/game2\";\n\nfunction Home(props: { path: string }) {\n    return <div class=\"section\">\n        <div class=\"container is-widescreen\">\n            <h1 class=\"title\">Pursuit Evasion</h1>\n            <div class=\"content\">\n                <p>\n                    Lorem ipsum dolor sit amet, consectetur adipiscing elit,\n                    sed do eiusmod tempor incididunt ut labore et dolore magna aliqua.\n                    Fringilla phasellus faucibus scelerisque eleifend donec pretium vulputate\n                    sapien. Condimentum id venenatis a condimentum vitae sapien pellentesque\n                    habitant morbi. Non odio euismod lacinia at quis risus sed vulputate.\n                    </p>\n            </div>\n            <div class=\"columns\">\n                <div class=\"column is-three-quarters\">\n                    <div class=\"box\">\n                        <Game2 width={962} height={595} />\n                    </div>\n                </div>\n                <div class=\"column\">\n                    <nav class=\"panel is-info\" style=\"height: 100%\">\n                        <p class=\"panel-heading\">Options</p>\n                        <p class=\"panel-tabs\">\n                            <a class=\"is-active\">One</a>\n                            <a>Two</a>\n                            <a>Three</a>\n                        </p>\n                        <div class=\"panel-block\">\n                            <p class=\"control has-icons-left\">\n                                <input class=\"input\" type=\"text\" placeholder=\"Search\" />\n                                <span class=\"icon is-left\">\n                                    <i class=\"fas fa-search\" aria-hidden=\"true\"></i>\n                                </span>\n                            </p>\n                        </div>\n                    </nav>\n                </div>\n            </div>\n        </div>\n    </div>;\n};\n\nexport default Home;\n","import { FunctionalComponent, h } from 'preact';\nimport { Link } from 'preact-router/match';\n\nconst NotFound: FunctionalComponent = () => {\n    return <div class=\"section\">\n        <div class=\"container is-widescreen\">\n            <h1 class=\"title\">404</h1>\n            {/* <p class=\"subtitle\">That page doesn&apos;t exist.</p> */}\n            <div class=\"content\">\n                We can't find the requested page.\n                {/* <Link href=\"/\">Back to Home</Link> */}\n            </div>\n        </div>\n    </div>;\n};\n\nexport default NotFound;\n","export default __webpack_public_path__ + \"b29109e2e3fee6b5d638ce02588d663a.png\";","import { FunctionalComponent, h } from 'preact';\nimport { Link } from 'preact-router/match';\n\nimport logo from \"../../assets/bulma-logo.png\";\n\nconst Header: FunctionalComponent = () => {\n    return (\n        <nav class=\"navbar\" role=\"navigation\" aria-label=\"main navigation\">\n            <div class=\"navbar-brand\">\n            <a class=\"navbar-item\" href=\"/\">\n                <img src={logo} width=\"112\" height=\"28\" />\n            </a>\n            </div>\n            <div class=\"navbar-menu\">\n                <div class=\"navbar-start\">\n                    <Link class=\"navbar-item is-tab\" activeClassName=\"is-active\" href=\"/\">Home</Link>\n                    <Link class=\"navbar-item is-tab\" activeClassName=\"is-active\" href=\"/other\">Other</Link>\n                </div>\n            </div>\n        </nav>\n    );\n};\n\nexport default Header;\n","import { h } from 'preact';\nimport { Route, Router } from 'preact-router';\n\nimport Home from './home';\nimport NotFoundPage from './notfound';\nimport Header from './header';\n\nfunction App() {\n    return (\n        <div id=\"preact_root\">\n            <Header />\n            <Router>\n                <Home path=\"/\" />\n                <NotFoundPage default />\n            </Router>\n        </div>\n    );\n};\n\nexport default App;\n","import \"./web/style/index.css\";\nimport \"./web/style/fontawesome/fontawesome.min.css\";\nimport \"./web/style/bulma.min.css\";\nimport App from \"./web/components/app\";\n\nexport default App;\n"],"sourceRoot":""}